
const util = require('../../utils/util.js')
const app = getApp();
var domain = app.globalData.host;
Page({
  data: {
    focus: false,
    val: '',
    toView: 1
  },
  onLoad: function () {
    var unionid = app.globalData.unionid;
    var that = this
    wx.request({
      url: domain +`/wxs/doctor/list?unionid=${unionid}&ifEnd=${0}`,
      method: "GET",
      contentType: 'application/json;charset=UTF-8',
      header: {
        'content-type': 'application/json'
      },
      success: function (result) {
        console.log(result.data);
        if(result.data.errcode == 0){
          var results = result.data.data
          for (var i = 0; i < results.length; i++) {
            if (results[i].wxUser.sex == 1) {
              results[i].wxUser.sex = "男"
            } else if (results[i].sex == 2) {
              results[i].wxUser.sex = "女"
            } else {
              results[i].wxUser.sex = "未知"
            }
            that.setData({
              list: results
            })
          }
        }else if (result.data.errcode == -1){
          wx.showModal({
            title: '提示',
            content: result.data.errmsg,
            showCancel: false,
            success(res) {
              if (res.confirm) {
                console.log('用户点击确定')
              }
            }
          })
        }
        
      }
    })
  },
  toCase: function (e) {
    console.log(e.target.dataset.pid);
    var id = e.target.dataset.pid;
    wx.navigateTo({
      url: '/pages/pages/EvaluationForm5?id=' + id,
      })
  },
  toView: function (e) {
    let i = parseInt(e.currentTarget.dataset.i) + 2;
    this.setData({
      toView: i
    })
  },


  onShow: function () {

  },

})
